Bootstrap: docker
From: continuumio/miniconda:4.7.12

%setup
    mkdir -p datastore

%files
    ./datastore ./datastore

%post
    apt-get install unzip
    conda env create -f environment.yml
    conda activate qiskit-terra-dev
    
%runscript
    git clone https://github.com/czachow/qiskit-terra/archive/advanced-csp_layout.zip
    unzip advanced-csp_layout.zip && cd advanced-csp_layout
    pip install . && cd ..
    jupyter nbconvert --to notebook --execute ./advanced-csp_layout/research/luciano/notebook.ipynb

%labels
    Author  Christopher Zachow
    Version V1.0.0

%help
    This a container to run the experiments for Qiskit-Terra. 